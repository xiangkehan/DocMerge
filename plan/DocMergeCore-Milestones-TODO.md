# DocMergeCore 开发里程碑 TODO 清单

本文档详细规划了 DocMergeCore 项目的开发里程碑，涵盖从项目初始化到集成测试的完整开发流程。每个里程碑都包含明确的任务清单和时间估算，便于团队跟踪项目进度和协调开发工作。

## 概览表格

以下表格汇总了所有里程碑的总体信息，便于快速了解项目全貌和资源分配。总体估计开发时间为 10 天，涵盖 15 个主要里程碑。

| 序号 | 里程碑名称 | 估计时间 | 任务数量 | 核心产出 |
|:---:|:---|:---:|:---:|:---|
| M1 | 项目初始化 | 0.5 天 | 3 项 | 项目基础架构 |
| M2 | 核心数据结构 | 1 天 | 9 项 | 数据模型定义 |
| M3 | 文档提取模块 | 1.5 天 | 6 项 | Word 文档解析能力 |
| M4 | 配置管理模块 | 0.5 天 | 5 项 | 配置和密钥管理 |
| M5 | AI 提供商抽象层 | 1 天 | 6 项 | 多提供商支持 |
| M6 | 向量化模块 | 0.5 天 | 4 项 | 语义相似度计算 |
| M7 | 摘要生成模块 | 0.5 天 | 4 项 | AI 摘要能力 |
| M8 | 分割分析模块 | 0.5 天 | 4 项 | 智能分割点检测 |
| M9 | 去重模块 | 0.5 天 | 4 项 | 内容去重引擎 |
| M10 | 融合模块 | 0.5 天 | 4 项 | 内容融合引擎 |
| M11 | 输出模块 | 1 天 | 5 项 | 多格式导出能力 |
| M12 | 核心管道编排 | 1 天 | 5 项 | 处理管道串联 |
| M13 | 错误处理 | 0.5 天 | 6 项 | 完善的异常体系 |
| M14 | API 封装 | 0.5 天 | 4 项 | 面向用户的 API |
| M15 | 集成测试 | 1 天 | 5 项 | 完整测试覆盖 |

**总计**：15 个里程碑，约 10 天开发时间，67 项具体任务。

---

## M1：项目初始化（0.5 天）

本里程碑目标是建立项目的基础架构，包括目录结构、依赖管理和开发工具配置。良好的初始化工作将为后续开发奠定坚实基础，减少技术债务积累。

### 任务清单

- [ ] 创建项目目录结构 docmergecore/
- [ ] 初始化 Python 虚拟环境和依赖文件
- [ ] 配置开发工具（pre-commit、mypy、black）

### 验收标准

项目目录结构清晰，依赖管理完善，开发工具链正常工作。团队成员可以快速克隆项目并开始开发，无需额外配置。

---

## M2：核心数据结构（1 天）

本里程碑目标是定义项目所需的所有核心数据结构和类型系统。数据结构是整个系统的基石，好的设计能够提高代码的可维护性和扩展性。

### 任务清单

- [ ] 定义 BlockType 枚举（heading、paragraph、image、table）
- [ ] 定义 ProviderType 枚举（ollama、deepseek）
- [ ] 定义 OutputFormat 枚举（word、markdown）
- [ ] 定义 DocumentBlock 数据类
- [ ] 定义 Document 数据类
- [ ] 定义 ProcessingJob 数据类
- [ ] 定义 MergedResult 数据类
- [ ] 定义其他辅助数据类（SemanticChunk、MergeCandidate 等）
- [ ] 编写数据结构单元测试

### 验收标准

所有核心数据结构定义完整，类型注解准确，单元测试覆盖率达到预期。数据结构能够准确表达文档处理过程中的各类信息。

---

## M3：文档提取模块（1.5 天）

本里程碑目标是实现从 Word 文档中提取结构化内容的能力。这是文档处理管道的入口，提取质量直接影响后续处理效果。

### 任务清单

- [ ] 实现 WordExtractor 类
- [ ] 实现 StructureParser 类
- [ ] 实现 Block 数据构建逻辑
- [ ] 实现 Document 数据构建逻辑
- [ ] 测试 10 种常见 Word 格式兼容性
- [ ] 处理图片提取和位置记录

### 验收标准

能够准确提取各类 Word 文档内容，包括文字、标题、表格、图片等元素。图片能够正确保存并记录其在文档中的位置信息。对常见格式的兼容性经过充分测试。

---

## M4：配置管理模块（0.5 天）

本里程碑目标是实现配置的本地存储和云端同步能力。良好的配置管理能够支持多环境部署和团队协作。

### 任务清单

- [ ] 实现 SettingsManager 本地文件读写
- [ ] 实现 KeysManager 本地 Key 存储
- [ ] 实现 SupabaseClient 云端集成
- [ ] 添加配置验证逻辑
- [ ] 处理不同平台的存储路径

### 验收标准

配置能够安全存储和读取，支持本地和云端同步。配置验证逻辑完善，跨平台路径处理正确。用户配置信息不会泄露或丢失。

---

## M5：AI 提供商抽象层（1 天）

本里程碑目标是建立 AI 服务的抽象接口，支持无缝切换不同的 AI 提供商。这种设计提高了系统的灵活性，降低了供应商锁定风险。

### 任务清单

- [ ] 定义 AIBaseProvider 抽象接口
- [ ] 实现 ProviderFactory 工厂类
- [ ] 实现 OllamaProvider 本地提供商
- [ ] 实现 DeepSeekProvider 云端提供商
- [ ] 添加提供商可用性检查方法
- [ ] 处理 API 调用和错误响应

### 验收标准

抽象接口设计合理，工厂类能够正确创建各类提供商实例。本地和云端提供商都能正常工作，错误处理完善，可用性检查准确。

---

## M6：向量化模块（0.5 天）

本里程碑目标是实现文档内容的向量化表示和语义相似度计算。这是实现智能文档处理的核心能力之一。

### 任务清单

- [ ] 实现 SentenceTransformerProvider
- [ ] 实现 SimilarityCalculator 余弦相似度计算
- [ ] 实现 SemanticGrouper 语义分组
- [ ] 测试向量化性能和准确率

### 验收标准

向量化计算准确高效，相似度计算结果合理。语义分组能够有效区分不同主题的内容段落。性能满足实时处理需求。

---

## M7：摘要生成模块（0.5 天）

本里程碑目标是实现使用 AI 生成文档摘要的能力。摘要功能帮助用户快速理解长文档的核心内容。

### 任务清单

- [ ] 实现 Summarizer 摘要生成类
- [ ] 实现批量摘要处理逻辑
- [ ] 测试摘要质量和生成速度
- [ ] 优化批量处理效率

### 验收标准

生成的摘要准确反映原文核心内容，语句通顺流畅。批量处理效率高，资源消耗合理。用户可以根据需要调整摘要长度和详细程度。

---

## M8：分割分析模块（0.5 天）

本里程碑目标是实现智能检测文档最佳分割位置的能力。这对于处理超长文档和并行处理非常重要。

### 任务清单

- [ ] 实现 SplitPointAnalyzer 分割分析类
- [ ] 实现分割点检测提示词
- [ ] 测试中文文档分割效果
- [ ] 处理边界情况和异常输入

### 验收标准

能够准确识别文档的自然分割点，分割后的各部分保持语义完整性。中文文档处理效果良好，异常输入不会导致系统崩溃。

---

## M9：去重模块（0.5 天）

本里程碑目标是实现文档内容的智能去重能力。去重能够消除重复信息，提高合并文档的质量。

### 任务清单

- [ ] 实现 DeduplicationEngine 去重引擎
- [ ] 实现相似度计算和分组逻辑
- [ ] 测试去重准确率和召回率
- [ ] 处理模糊匹配场景

### 验收标准

去重引擎能够有效识别并处理重复内容，准确率高，误删率低。对于表述相似但不完全相同的内容，能够合理判断是否需要去重。

---

## M10：融合模块（0.5 天）

本里程碑目标是实现将多个文档内容融合为一个连贯文档的能力。融合是文档合并的最后关键步骤。

### 任务清单

- [ ] 实现 MergingEngine 融合引擎
- [ ] 实现冲突解决逻辑
- [ ] 测试融合质量
- [ ] 保留原始格式信息

### 验收标准

融合后的文档结构清晰，内容连贯自然。冲突解决逻辑合理，能够处理标题冲突、章节重叠等情况。原始格式信息得到妥善保留。

---

## M11：输出模块（1 天）

本里程碑目标是实现将处理后的文档导出为多种格式的能力。输出模块是整个处理流程的结果呈现。

### 任务清单

- [ ] 实现 WordExporter Word 导出
- [ ] 实现 MarkdownExporter Markdown 导出
- [ ] 实现 FormatPreserver 格式保留
- [ ] 测试格式还原准确率
- [ ] 处理图片插入和位置

### 验收标准

导出的文档格式准确，还原度高。Word 和 Markdown 两种格式都能正确输出。图片能够正确定位和显示，格式信息完整保留。

---

## M12：核心管道编排（1 天）

本里程碑目标是实现将各处理阶段串联成完整管道的功能。管道编排是整个系统的调度中心。

### 任务清单

- [ ] 实现 PipelineOrchestrator 管道编排器
- [ ] 实现 Processor 各阶段处理器
- [ ] 实现进度回调机制
- [ ] 实现阶段间数据传递
- [ ] 优化管道执行效率

### 验收标准

管道能够完整执行所有处理阶段，数据在各阶段之间正确传递。进度回调准确及时，用户能够了解处理进展。执行效率优化良好。

---

## M13：错误处理（0.5 天）

本里程碑目标是建立完善的异常处理体系。良好的错误处理能够提高系统的健壮性和用户体验。

### 任务清单

- [ ] 定义 DocMergeError 异常基类
- [ ] 定义 AIProviderError AI 服务异常
- [ ] 定义 ConfigurationError 配置异常
- [ ] 定义 ExtractionError 提取异常
- [ ] 实现重试和降级逻辑
- [ ] 实现部分结果返回机制

### 验收标准

异常体系完整，分类清晰。错误信息对用户有帮助，能够指导用户解决问题。重试和降级机制有效，部分结果返回机制能够让用户即使在出错时也能获得有用信息。

---

## M14：API 封装（0.5 天）

本里程碑目标是提供面向用户的简洁 API。好的 API 设计能够降低使用门槛，提高用户满意度。

### 任务清单

- [ ] 实现 DocMerge 简单同步 API 类
- [ ] 实现 ProcessingPipeline 高级异步 API
- [ ] 编写 API 使用文档和示例
- [ ] 添加类型注解和类型检查

### 验收标准

API 设计简洁直观，文档示例清晰易懂。同步和异步两种方式都能正常工作。类型注解完整，类型检查通过。

---

## M15：集成测试（1 天）

本里程碑目标是验证整个系统的完整功能和性能。集成测试是发布前的最后关卡。

### 任务清单

- [ ] 编写端到端测试流程
- [ ] 测试完整管道执行
- [ ] 测试异常场景处理
- [ ] 性能基准测试
- [ ] 编写测试报告

### 验收标准

端到端测试覆盖所有主要功能场景。异常场景处理正确，用户能够获得清晰的错误提示。性能满足预期要求。测试报告完整准确。

---

## 总结

本文档规划了 DocMergeCore 项目的完整开发路径，从基础架构搭建到最终测试验证，共包含 15 个里程碑和 67 项具体任务。总体估计开发时间为 10 天。

### 关键里程碑时间分布

开发时间主要集中在核心功能实现上，其中文档提取模块和核心管道编排各需要 1 天时间，这是系统最复杂的部分。数据结构定义和 AI 提供商抽象层各需要 1 天，为后续开发奠定基础。输出模块需要 1 天时间确保导出质量。剩余里程碑各需 0.5 天，可以并行推进。

### 团队协作建议

建议采用敏捷开发方式，将里程碑拆分为更小的迭代。每个里程碑结束后进行代码审查和文档更新，确保知识及时传递。对于相互依赖的里程碑，如 M5 AI 提供商抽象层和 M7 摘要生成模块，可以安排专人负责并保持沟通协调。

### 风险提示

AI 服务集成是项目的技术难点，建议提前进行概念验证。文档格式兼容性需要大量测试用例积累，建议在 M3 阶段投入足够资源。集成测试阶段可能会发现早期未预料的问题，建议预留缓冲时间。

---

*文档版本：1.0*
*创建日期：2026 年 1 月 23 日*
